"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[399],{1399:function(e,n,r){r.r(n),r.d(n,{default:function(){return x}});var t=r(9439),s=r(2791),i=r(9721),u=r(8687),c=r(7689),a=r(1087),o=r(6697),l=r(184),d=s.memo((function(){var e=(0,u.v9)((function(e){return e.chat.status})),n=(0,u.v9)((function(e){return e.auth.isAuth})),r=(0,o.T)();return(0,s.useEffect)((function(){return r((0,i.bX)()),function(){r((0,i.P2)())}}),[]),n?(0,l.jsx)("div",{children:"error"===e?(0,l.jsx)("div",{children:"Error. Please restart page"}):(0,l.jsxs)("div",{children:[(0,l.jsx)(f,{}),(0,l.jsx)(v,{})]})}):(0,l.jsx)(c.Fg,{to:"/profile"})})),f=s.memo((function(){var e=(0,s.useState)(!1),n=(0,t.Z)(e,2),r=n[0],i=n[1],c=(0,s.useRef)(null),a=(0,u.v9)((function(e){return e.chat.messages}));(0,s.useEffect)((function(){var e;r&&(null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[a]);return(0,l.jsxs)("div",{style:{height:780,overflowY:"auto"},onScroll:function(e){var n=e.currentTarget;Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<300?i(!0):i(!1)},children:[a.map((function(e){return(0,l.jsx)(h,{message:e})})),(0,l.jsx)("div",{ref:c})]})})),h=s.memo((function(e){var n=e.message;return(0,l.jsxs)("div",{className:"singleMessage",children:[(0,l.jsx)(a.OL,{to:"/profile/"+n.userId,children:(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:n.userName})," "]})}),(0,l.jsx)("img",{src:n.photo}),(0,l.jsx)("div",{children:n.message})]})})),v=function(){var e=(0,o.T)(),n=(0,u.v9)((function(e){return e.chat.status})),r=(0,s.useState)(""),c=(0,t.Z)(r,2),a=c[0],d=c[1];return(0,l.jsx)("div",{className:"sendWindow",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("textarea",{onChange:function(e){return d(e.currentTarget.value)},value:a}),(0,l.jsx)("button",{disabled:"ready"!==n,onClick:function(){e((0,i.bE)(a)),d("")},children:"Send"})]})})},x=function(){return(0,l.jsx)("div",{children:(0,l.jsx)(d,{})})}}}]);
//# sourceMappingURL=399.0f1d7600.chunk.js.map